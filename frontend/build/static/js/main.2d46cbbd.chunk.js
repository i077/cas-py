(this.webpackJsonpCAStle=this.webpackJsonpCAStle||[]).push([[0],{22:function(e,t,n){e.exports=n(37)},27:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(19),s=n.n(r),o=(n(27),n(6)),c=n(7),l=n(5),u=n(9),h=n(8),d=n(21),p=n(10),m=n(11),y=n(16),f=n(14),v=n(12),b=n.n(v),k=(n(31),{macros:{"\\dd":"\\mathrm{d}","\\dv":"\\frac{\\text{d} #1}{\\text{d} #2}","\\pdv":"\\frac{\\partial #1}{\\partial #2}"}}),g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"live-input-div"},i.a.createElement(b.a,{math:this.props.input,errorColor:"#cc0000",settings:k}))}}]),n}(i.a.Component),O=(n(32),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={input:"",previousSelect:e.selectedText},a.textAreaChange=a.textAreaChange.bind(Object(l.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.handleReset=a.handleReset.bind(Object(l.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"handleKeyPress",value:function(e){"Enter"===e.key&&e.ctrlKey&&this.handleSubmit()}},{key:"getReplacedInput",value:function(e){for(var t=this,n=/[$]\d+/g,a=n.exec(e),i=function(){var i=parseInt(a[0].substr(1,a[0].length-1)),r=t.props.history.find((function(e){return e.id===i}));e=void 0===r?e.replace(a[0],"( \\text{Reference Not Found})"):!1===r.output||""===r.output?e.replace(a[0],"( \\text{Reference has No Output})"):e.replace(a[0],"("+r.output+")"),a=n.exec(e)};null!==a;)i();return e}},{key:"textAreaChange",value:function(e){this.setState({input:e.target.value})}},{key:"handleSubmit",value:function(){var e=this.getReplacedInput(this.state.input);this.props.submitHandler(e)}},{key:"handleReset",value:function(){this.props.resetHandler()}},{key:"render",value:function(){return i.a.createElement("div",{className:"input-div"},i.a.createElement(f.a,{id:"input-form"},i.a.createElement(f.a.Group,null,i.a.createElement(m.a,null,i.a.createElement(p.a,null,i.a.createElement(f.a.Control,{as:"textarea",rows:"6",value:this.state.input,onChange:this.textAreaChange,onKeyUp:this.handleKeyPress})),i.a.createElement(p.a,null,i.a.createElement(g,{input:this.getReplacedInput(this.state.input)}))),i.a.createElement(m.a,{className:"input-button-row"},i.a.createElement(y.a,{onClick:this.handleSubmit},"Submit LaTeX"),i.a.createElement(y.a,{onClick:this.handleReset},"Reset State")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.selectedText!==t.previousSelect?{input:e.selectedText,previousSelect:e.selectedText}:{input:t.input}}}]),n}(i.a.Component)),S=(n(34),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).elementClick=a.elementClick.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"elementClick",value:function(){this.props.handleClick(this.props.historyItem)}},{key:"getHistoryItemInput",value:function(){return this.props.historyItem.input}},{key:"getHistoryItemOutput",value:function(){return this.props.historyItem.output}},{key:"getHistoryItemError",value:function(){return this.props.historyItem.error}},{key:"render",value:function(){return i.a.createElement("div",{className:"history-item-div",onClick:this.elementClick},i.a.createElement("div",{className:"history-item-id-div"},"[",this.props.historyItem.id,"]"),i.a.createElement("div",{className:"history-item-textinput-div"},i.a.createElement(b.a,{math:this.getHistoryItemInput(),errorColor:"#cc0000",settings:k})),i.a.createElement("div",{className:this.getHistoryItemError()?"history-item-texterror-div":"history-item-textoutput-div"},this.getHistoryItemError()?i.a.createElement("code",null,this.getHistoryItemError()):i.a.createElement(b.a,{math:this.getHistoryItemOutput(),errorColor:"#cc0000",settings:k})))}}]),n}(i.a.Component)),E=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{ref:function(t){e.el=t}})}}]),n}(i.a.Component),j=(n(35),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleElement=a.handleElement.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"handleElement",value:function(e){this.props.handleHistory(e)}},{key:"render",value:function(){var e=this,t=this.props.history.map((function(t,n){return i.a.createElement(S,{key:n,historyItem:t,handleClick:e.handleElement})}));return i.a.createElement("div",{className:"history-div"},i.a.createElement("div",{className:"history-list-div"},t,i.a.createElement(E,null)))}}]),n}(i.a.Component)),C={getSession:function(){var e=("; "+document.cookie).split("; cas-session:");if(2===e.length)return e.pop().split(";").shift()},setSession:function(e){document.cookie="cas-session:"+e}},x=(n(36),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={history:[],selectedText:""},a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.handleReset=a.handleReset.bind(Object(l.a)(a)),a.handleHistoryClick=a.handleHistoryClick.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){void 0===C.getSession()?this.createNewSession():this.getHistory()}},{key:"createNewSession",value:function(){fetch("http://localhost:5000/create-session",{method:"POST",body:JSON.stringify({id:C.getSession()})}).then((function(e){return e.json()})).then((function(e){C.setSession(e.id)}))}},{key:"handleReset",value:function(){void 0!==C.getSession()&&(this.setState({history:[],selectedText:""}),this.createNewSession())}},{key:"handleSubmit",value:function(e){var t=this;fetch("http://localhost:5000/run",{method:"POST",body:JSON.stringify({id:C.getSession(),input:e})}).then((function(e){return e.json()})).then((function(n){var a=t.state.history,i=0===a.length?1:a[a.length-1].id+1,r=t.state.history.concat({id:i,input:e,error:n.error,output:n.output});t.setState({history:r}),t.updateHistory()}))}},{key:"updateHistory",value:function(){fetch("http://localhost:5000/update-history",{method:"POST",body:JSON.stringify({id:C.getSession(),calculation:this.getLastCalculation()})})}},{key:"getHistory",value:function(){var e=this;fetch("http://localhost:5000/get-history",{method:"POST",body:JSON.stringify({id:C.getSession()})}).then((function(e){return e.json()})).then((function(t){e.setState({history:t.history})}))}},{key:"getLastCalculation",value:function(){var e={id:NaN,input:"",error:"",output:""},t=this.state.history;return 0===t.length?e:t[t.length-1]}},{key:"handleHistoryClick",value:function(e){this.setState({selectedText:e.input}),this.forceUpdate()}},{key:"render",value:function(){return i.a.createElement(d.a,{fluid:!0,className:"App-container"},i.a.createElement(m.a,{className:"App-header-row"},"CAS"),i.a.createElement(m.a,{className:"App-main-row"},i.a.createElement(p.a,{className:"App-col"},i.a.createElement(j,{history:this.state.history,handleHistory:this.handleHistoryClick}),i.a.createElement(O,{submitHandler:this.handleSubmit,resetHandler:this.handleReset,history:this.state.history,selectedText:this.state.selectedText}))))}}]),n}(i.a.Component)),N=document.getElementById("root");s.a.render(i.a.createElement(x,null),N)}},[[22,1,2]]]);
//# sourceMappingURL=main.2d46cbbd.chunk.js.map